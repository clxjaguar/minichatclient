/*

Todo :

(09:52:50) cLx: [TimeStamp]: http://www.serveur.com/2011/03 ... -a-lecole/
(09:53:04) cLx: il a pas renvoyé le bon lien ^^'
(09:55:07) niki: ok
(09:55:49) niki: mais il devait renovyer quoi?
(09:57:10) cLx: http://www.divertissonsnous.com/2011/03/14/se-battre-contre-un-gros-a-lecole/
(09:57:22) cLx: MAIS ! si le html était :
(09:57:49) niki: pcq bon, c un choix... je compte mettre (http://url] nom-url
(09:58:04) cLx: ouais voila
(09:58:20) niki: mais ca c pas encore fait ^^"'
(09:58:39) cLx: mais pour pas que ça soit trop lourd, il faut vérifier que le texte du lien soit pas la même chose que le lien, ou bien la même chose en version raccourcie ...
(09:59:41) cLx: mais sinon a part ça, super boulot, c'est cool :)
(09:59:54) niki: merci :)
(10:00:13) niki: (la version raccourcie, bonjour pour vérifier.. :x)
(10:01:25) cLx: je pense qu'il faut couper la chaine avec " ... "
(10:01:54) cLx: et après regarder si le coté gauche correspond au début, et le coté droit correspond à la fin ...
(10:02:11) niki: oui, on peut faire ça.. en supposant qu'ils raccourcissent toujours de la meme facon
(10:02:24) cLx: ouais je pense
(10:02:28) niki: ok alors

Bref:

(10:20:36) cLx: est ce que vous pouvezprocess_part(prev_data, 1) cliquer sur cette URL (http://perdu.com) ?
(10:20:48) cLx: sans que ça prenne les parenthèses dans l'adresse ?
(10:21:34) niki: oui
(10:21:41) cLx: parce que c'est assez classe comme façon de sortir "<!-- m --><a class="postlink" href="http://perdu.com">URL</a><!-- m --> ?"
(10:22:17) niki: oui
(10:22:19) niki: à noter :)

<strong>Nouveau Sujet</strong>: <a href="http://forum.francefurs.org/viewtopic.php?p=172728#p172728" class="postlink">Grosse surprise ce matin Oo</a>

clx@CatServ:~/softwares/minichatclient$ ./parser-test '<strong>Nouveau Sujet</strong>: <a href="http://forum.url.org/viewtopic.php?p=172728#p172728" class="postlink">Grosse surprise ce matin Oo</a>'
[TimeStamp]: *Nouveau Sujet*: Grosse surprise ce matin Oo
=> *Nouveau Sujet*: Grosse surprise ce matin Oo (http://forum.url.org/viewtopic.php?p=172728#p172728)

Et:
clx@CatServ:~/softwares/minichatclient$ ./parser-test '@ <span style="font-weight: bold">nick</span>'     
*** glibc detected *** ./parser-test: free(): invalid pointer: 0x08048960 ***
( http://pastebin.com/2WZnyq98, répétable !)

CHANGED : j'ai supprimé le timestamp, il ne doit pas être mis ici, et j'ai rajouté les mises à null après les free(). </cLx>

****

<aa> @ <span ....>XX</span>, FF
	from: aa
	to: XX
	mess: FF

<span style="font-weight: bold">
</span>

### Comments

context=
tag=strong
value=
use=*
end-tag=*

context=span
tag=style
value="font-weight: bold"
use=*
tag=style
value="font-???: italic"
use=_
end-tag=!REVERSE!

strong=*
/strong=*
a=[\{href}
/a=]

loop: link each tag with its corresponding off-tag

<span style="font-weight: bold">
	replace with <b>, replace corresp by </b>


*/

Les examples suivants ont été tirés du minichat. D'abord les trucs courants :

********************
@ <span style="font-weight: bold">FeNr1s</span>, LU'

Devrait retourner :
FeNr1s: LU'

********************
<strong>Nouveau Sujet</strong>: <a href="http://forum.francefurs.org/viewtopic.php?p=176959#p176959" class=
"postlink">Un jeu plein de furries pour l'été :3</a>
Devrait retourner :
*Nouveau Sujet*: Un jeu plein de furries pour l'été :3 (http://forum.francefurs.org/viewtopic.php?p=176959#p176959) 

********************
<!-- m --><a class="postlink" href="http://www.youtube.com/watch?v=0YJR-doOWf8">http://www.youtube.com/watch?v=0YJR-doOWf8</a><!-- m -->

Devrait retourner :
http://www.youtube.com/watch?v=0YJR-doOWf8
(lien identique au texte affiché, on n'affiche ce truc une seule fois)

********************
<!-- m --><a class="postlink" href="http://www.divertissonsnous.com/2011/03/14/se-battre-contre-un-gros-a-lecole/">http://www.divertissonsnous.com/2011/03 ... -a-lecole/</a><!-- m -->

Devrait retourner :
http://www.divertissonsnous.com/2011/03/14/se-battre-contre-un-gros-a-lecole/
(il faut couper la chaine sur les " ... " et voir si le coté gauche correspond au début, et le coté droit à la fin pour voir si on peut virer ce qui est normalement affiché au profit du lien)

********************
<Leeden> <img src="http://t3.gstatic.com/images?q=tbn:ANd9GcRFSm3Ll9aQLTiG6xiJ1uRXr90ws-NtHWiWZO44sSOjihPfWCrM&t=1" alt="Image" />

Devrait retourner :
Image (http://t3.gstatic.com/images?q=tbn:ANd9GcRFSm3Ll9aQLTiG6xiJ1uRXr90ws-NtHWiWZO44sSOjihPfWCrM&t=1)

********************
Et maintenant le pire pour la fin :

<div><span onclick="show(getNextSibling(getNextSibling(this)));hide(this);" style="color:rgb(16, 112, 191);cursor: pointer;cursor: hand;text-decoration: none;" title="Afficher"><img src="/styles/FF/imageset/absolutchrys_youtube2.png" valign="middle" alt="Afficher" width="50"></span><span><a href="http://www.youtube.com/watch?v=TQMBzIJyYSQ">http://youtu.be/TQMBzIJyYSQ</a></span>  <span style="display: none"><object width="425" height="350"><param name="movie" value="http://www.youtube.com/v/TQMBzIJyYSQ"></param><param name="wmode" value="transparent"></param><embed src="http://www.youtube.com/v/TQMBzIJyYSQ" type="application/x-shockwave-flash" wmode="transparent" width="425" height="350"></embed></object></span>

Devrait retourner :
http://youtu.be/TQMBzIJyYSQ
(putain il le fait! je suis vraiment impressionné sur ce coup là !)
